<!-- filepath: c:\Users\LENOVO\OneDrive\Documents\BYU Pathway\CSE340\CSE340-starter\views\reviews\edit.ejs -->
<!-- Reviews Edit View Content Only (uses shared layout) -->

<!-- The Content Heading -->
<% if (title) { %>
  <h1><%= title %></h1>
<% } %>

<!-- Edit Review Form -->
<section class="edit-review-form">
  <h2>Edit Your Review</h2>

  <%- messages() %>

  <% if (errors) { %>
    <ul class="notice">
    <% errors.array().forEach(error => { %>
      <li><%= error.msg %></li>
    <% }) %>
    </ul>
  <% } %>

  <form action="/reviews/update" method="post" class="review-form">
    <input type="hidden" name="review_id" value="<%= reviewData.review_id %>">

    <!-- Rating Selection -->
    <div class="form-row">
      <label for="review_rating">Rating:</label>
      <div class="rating-input">
        <input type="radio" id="rating-5" name="review_rating" value="5" <%= reviewData.current_rating == 5 ? 'checked' : '' %> required>
        <label for="rating-5" class="star-label">⭐⭐⭐⭐⭐</label>
        <input type="radio" id="rating-4" name="review_rating" value="4" <%= reviewData.current_rating == 4 ? 'checked' : '' %>>
        <label for="rating-4" class="star-label">⭐⭐⭐⭐</label>
        <input type="radio" id="rating-3" name="review_rating" value="3" <%= reviewData.current_rating == 3 ? 'checked' : '' %>>
        <label for="rating-3" class="star-label">⭐⭐⭐</label>
        <input type="radio" id="rating-2" name="review_rating" value="2" <%= reviewData.current_rating == 2 ? 'checked' : '' %>>
        <label for="rating-2" class="star-label">⭐⭐</label>
        <input type="radio" id="rating-1" name="review_rating" value="1" <%= reviewData.current_rating == 1 ? 'checked' : '' %>>
        <label for="rating-1" class="star-label">⭐</label>
      </div>
    </div>

    <!-- Review Text -->
    <div class="form-row">
      <label for="review_text">Your Review:</label>
      <textarea
        id="review_text"
        name="review_text"
        rows="5"
        maxlength="500"
        placeholder="Share your thoughts about this vehicle..."
        required
      ><%= reviewData.current_text %></textarea>
      <small class="form-hint">Maximum 500 characters</small>
    </div>

    <!-- Form Actions -->
    <div class="form-actions">
      <button type="submit" class="btn">Update Review</button>
      <a href="/reviews/user-reviews" class="btn btn-secondary">Cancel</a>
    </div>
  </form>
</section>
